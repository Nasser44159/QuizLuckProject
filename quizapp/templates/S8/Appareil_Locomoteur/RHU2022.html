<!DOCTYPE html>
{% load static %}

<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Luck</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="{% static 'css/stylequiz.css' %}">
    <link rel="stylesheet" href="{% static 'css/stylenavbar1.css' %}">



</head>
<body>


<div class="navbar">
    <span class="logo">QuizLuck</span>
    <!-- Bouton pour ouvrir compl√®tement la barre lat√©rale -->
<div class="hamburger-menu">
    <span></span>
    <span></span>
    <span></span>
</div>

    <div class="user-menu">
        <div class="user-profile" onclick="toggleMenu()">
            <span class="profile-icon">üë§</span>
            <span class="user-name">Bonjour, {{ user_full_name}} !</span>
            <span class="dropdown-arrow">‚ñº</span>
        </div>
        <ul class="dropdown-menu" id="dropdown-menu">
            <li><a href="#" onclick="openAccountModal()">Mon Compte</a></li>
            <li>
                <a href="{% url 'login' %}">
                    <i class="fas fa-sign-out-alt"></i> D√©connexion
                </a>
            </li>
        </ul>
    </div>

</div>

<!-- Pop-up Modifier Mon Compte -->
<div id="account-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Modifier Mon compte</h3>
            <span class="close-btn" onclick="closeAccountModal()">&times;</span>
        </div>
        <div class="modal-body">
            <form id="account-form">
                {% csrf_token %}
                <label for="username">Nom d'utilisateur :</label>
                <input type="text" id="username" name="username" value="{{ user_full_name}}" required>
<!-- Champ cach√© contenant la date de naissance -->
<input type="hidden" id="profile-dob" value="{{ request.user.profile.birth_date|date:'Y-m-d' }}">

                <label for="dob">Date de naissance :</label>
                <input type="date" id="dob" name="dob" value="{{ user.dob|date:'Y-m-d' }}">

                <label for="password">Nouveau mot de passe :</label>
                <input type="password" id="password" name="password" placeholder="Nouveau mot de passe">

                <label for="confirm-password">R√©p√©ter le mot de passe :</label>
                <input type="password" id="confirm-password" name="confirm_password" placeholder="R√©p√©ter le mot de passe">

                <button type="button" id="submit-form" class="btn-primary">Modifier</button>
            </form>
        </div>
    </div>
</div>

<!-- Pop-up Message -->
<div id="success-popup" class="popup">
    <div class="popup-content">
        <p id="popup-message"></p>
        <button onclick="closePopup()">OK</button>
    </div>
</div>


<div class="sidebar open" id="sidebar">

    <!-- Section Accueil -->
    <h3><i class="fas fa-home"></i> Accueil</h3>
    <ul>
        <li><a href="{% url 'home' %}"><i class="fas fa-arrow-circle-left"></i> Retourner √† l'accueil</a></li>
    </ul>

    <!-- Section Modes -->
    <h3><i class="fas fa-gamepad"></i> Modes</h3>
    <ul>
        <li><a href="{% url 'start_challenge' %}"><i class="fas fa-bolt"></i> Mode Challenge</a></li>
	<li><a href="{% url 'revision' %}"><i class="fas fa-book"></i> Mode R√©vision</a></li>
        <li><a href="{% url 'resultats' %}"><i class="fas fa-chart-line"></i> Vos R√©sultats</a></li>
    </ul>

<!-- Section Vos Modules -->
<h3><i class="fas fa-folder"></i> Vos Modules</h3>
<div id="sidebar-semesters">
    <ul>
        {% for semester, modules in data.items %}
            <li>
                <span class="semester-title">
                    <i class="fas fa-graduation-cap"></i> {{ semester }}
                    <span class="toggle-arrow">‚ñ∂</span> <!-- Fl√®che pour masquer/afficher -->
                </span>
                <ul class="modules-list hidden"> <!-- Liste masqu√©e par d√©faut -->
                    {% for module in modules %}
                        <li>
                            <!-- Affiche uniquement la description -->
                            <a href="/{{ semester }}/{{ module.name }}/">
                                <i class="fas fa-book"></i> {{ module.description }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
</div>




    <!-- Bouton D√©connexion -->
    <div class="logout-icon">
        <a href="{% url 'login' %}">
            <i class="fas fa-sign-out-alt"></i> D√©connexion
        </a>
    </div>
</div>



    <div id="content">

            <div class="quiz-title">
                <h1>QCM Rhumatologie</h1>
            </div>
            <form id="quiz-form">
                <input type="hidden" id='exam_name' name="exam_name" value="RHU2022">
    {% csrf_token %}
    
        <div id="question-1" class="question-container">
            <div class="question">
                <p>1.) Une patiente de 55 ans, est hospitalis√©e pour sensations f√©briles, douleurs articulaires d‚Äôallure inflammatoire √©voluant depuis 3 mois avec gonflement articulaire, pr√©dominant aux mains, avec d√©formation des doigts. Les douleurs articulaires √©pargnent les IPD. Les sympt√¥mes sont grossi√®rement sym√©triques. Le reste de l‚Äôexamen clinique est sans particularit√©. Au bilan biologique : h√©mogramme : GB: 16000/mm3, neutrophiles: 9500/mm3, lymphocytes: 2000/mm3, plaquettes: 500.000/mm3, h√©moglobine: 8g/dl hypo chrome microcytaire, VS: 80 mm, CRP: 60mg/l</p>
                <ul>
        
                    <li><input type="checkbox" id="q1a" name="q1" value="A"> A- Maladie de Horton</li>
            
                    <li><input type="checkbox" id="q1b" name="q1" value="B"> B- Polyarthrite rhumato√Øde</li>
            
                    <li><input type="checkbox" id="q1c" name="q1" value="C"> C- Tuberculose</li>
            
                    <li><input type="checkbox" id="q1d" name="q1" value="D"> D- Arthrite septique</li>
            
                    <li><input type="checkbox" id="q1e" name="q1" value="E"> E- Arthrose</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q1')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q1')">R√©essayer</button>
                <button class="favorite-button" data-question="1">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_1" onclick="toggleCommentSection('RHU2022_1', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_1">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-2" class="question-container">
            <div class="question">
                <p>2.) Quels examens √† vis√©e diagnostique demandez-vous ?</p>
                <ul>
        
                    <li><input type="checkbox" id="q2a" name="q2" value="A"> A- Echodoppler des MS</li>
            
                    <li><input type="checkbox" id="q2b" name="q2" value="B"> B- Ac anti CCP</li>
            
                    <li><input type="checkbox" id="q2c" name="q2" value="C"> C- Quantif√©ron</li>
            
                    <li><input type="checkbox" id="q2d" name="q2" value="D"> D- Calc√©mie</li>
            
                    <li><input type="checkbox" id="q2e" name="q2" value="E"> E- √âchographie articulaire</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q2')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q2')">R√©essayer</button>
                <button class="favorite-button" data-question="2">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_2" onclick="toggleCommentSection('RHU2022_2', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_2">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-3" class="question-container">
            <div class="question">
                <p>3.) Quel serait le traitement de fond id√©al pour cette maladie?</p>
                <ul>
        
                    <li><input type="checkbox" id="q3a" name="q3" value="A"> A- La corticoth√©rapie</li>
            
                    <li><input type="checkbox" id="q3b" name="q3" value="B"> B- Les antiarthrosiques</li>
            
                    <li><input type="checkbox" id="q3c" name="q3" value="C"> C- Les AINS</li>
            
                    <li><input type="checkbox" id="q3d" name="q3" value="D"> D- L‚Äôazathioprine</li>
            
                    <li><input type="checkbox" id="q3e" name="q3" value="E"> E- Le m√©thotrexate</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q3')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q3')">R√©essayer</button>
                <button class="favorite-button" data-question="3">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_3" onclick="toggleCommentSection('RHU2022_3', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_3">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-4" class="question-container">
            <div class="question">
                <p>4.) L‚Äôost√©oporose est caract√©ris√©e par:</p>
                <ul>
        
                    <li><input type="checkbox" id="q4a" name="q4" value="A"> A- Sa malignit√©</li>
            
                    <li><input type="checkbox" id="q4b" name="q4" value="B"> B- Sa raret√©</li>
            
                    <li><input type="checkbox" id="q4c" name="q4" value="C"> C- Son caract√®re douloureux</li>
            
                    <li><input type="checkbox" id="q4d" name="q4" value="D"> D- Le risque de fractures</li>
            
                    <li><input type="checkbox" id="q4e" name="q4" value="E"> E- Son caract√®re silencieux</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q4')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q4')">R√©essayer</button>
                <button class="favorite-button" data-question="4">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_4" onclick="toggleCommentSection('RHU2022_4', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_4">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-5" class="question-container">
            <div class="question">
                <p>5.) Son diagnostic est bas√© sur:</p>
                <ul>
        
                    <li><input type="checkbox" id="q5a" name="q5" value="A"> A- Ost√©odensitom√©trie</li>
            
                    <li><input type="checkbox" id="q5b" name="q5" value="B"> B- Scintigraphie osseuse</li>
            
                    <li><input type="checkbox" id="q5c" name="q5" value="C"> C- Dosage de la calc√©mie</li>
            
                    <li><input type="checkbox" id="q5d" name="q5" value="D"> D- Dosage de la vitamine D</li>
            
                    <li><input type="checkbox" id="q5e" name="q5" value="E"> E- Scanner osseux</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q5')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q5')">R√©essayer</button>
                <button class="favorite-button" data-question="5">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_5" onclick="toggleCommentSection('RHU2022_5', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_5">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-6" class="question-container">
            <div class="question">
                <p>6.) Une fracture ost√©oporotique vert√©brale:</p>
                <ul>
        
                    <li><input type="checkbox" id="q6a" name="q6" value="A"> A- Est une fracture ost√©oporotique s√©v√®re.</li>
            
                    <li><input type="checkbox" id="q6b" name="q6" value="B"> B- Peut-√™tre localis√©e au niveau cervical.</li>
            
                    <li><input type="checkbox" id="q6c" name="q6" value="C"> C- Peut-√™tre asymptomatique.</li>
            
                    <li><input type="checkbox" id="q6d" name="q6" value="D"> D- N√©cessite un traitement anti-ost√©oporotique m√™me devant un T-scores > a -2.</li>
            
                    <li><input type="checkbox" id="q6e" name="q6" value="E"> E- Le traitement est chirurgical</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q6')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q6')">R√©essayer</button>
                <button class="favorite-button" data-question="6">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_6" onclick="toggleCommentSection('RHU2022_6', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_6">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-7" class="question-container">
            <div class="question">
                <p>7.) Le DAS 28:</p>
                <ul>
        
                    <li><input type="checkbox" id="q7a" name="q7" value="A"> A- Est un score d‚Äôactivit√© de la polyarthrite rhumato√Øde.</li>
            
                    <li><input type="checkbox" id="q7b" name="q7" value="B"> B- Comporte 2 √©l√©ments : CRP et le nombre d‚Äôarticulations gonfl√©es.</li>
            
                    <li><input type="checkbox" id="q7c" name="q7" value="C"> C- Un DAS ‚â§ 3 correspond √† une r√©mission de la maladie.</li>
            
                    <li><input type="checkbox" id="q7d" name="q7" value="D"> D- Permet le diagnostic de la polyarthrite rhumato√Øde.</li>
            
                    <li><input type="checkbox" id="q7e" name="q7" value="E"> E- 28 correspond au nombre d‚Äôarticulations concern√©es</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q7')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q7')">R√©essayer</button>
                <button class="favorite-button" data-question="7">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_7" onclick="toggleCommentSection('RHU2022_7', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_7">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-8" class="question-container">
            <div class="question">
                <p>8.) Les facteurs de mauvais pronostic au cours de la polyarthrite rhumato√Øde sont :</p>
                <ul>
        
                    <li><input type="checkbox" id="q8a" name="q8" value="A"> A- La pr√©sence d‚Äô√©rosions pr√©coces.</li>
            
                    <li><input type="checkbox" id="q8b" name="q8" value="B"> B- Des Anticcp sup√©rieures √† 3 fois la normale.</li>
            
                    <li><input type="checkbox" id="q8c" name="q8" value="C"> C- Un syndrome inflammatoire majeur.</li>
            
                    <li><input type="checkbox" id="q8d" name="q8" value="D"> D- √âchec de ‚â• 2 csDMARDs.</li>
            
                    <li><input type="checkbox" id="q8e" name="q8" value="E"> E- Sexe masculin</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q8')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q8')">R√©essayer</button>
                <button class="favorite-button" data-question="8">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_8" onclick="toggleCommentSection('RHU2022_8', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_8">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-9" class="question-container">
            <div class="question">
                <p>9.) En cas de monoarthrite aigue du genou, La pr√©sence de cristaux d‚Äôurate monosodique:</p>
                <ul>
        
                    <li><input type="checkbox" id="q9a" name="q9" value="A"> A- N‚Äôexclut pas la possibilit√© d'atteinte infectieuse.</li>
            
                    <li><input type="checkbox" id="q9b" name="q9" value="B"> B- Oriente vers une crise de goutte.</li>
            
                    <li><input type="checkbox" id="q9c" name="q9" value="C"> C- √âlimine une arthrite septique.</li>
            
                    <li><input type="checkbox" id="q9d" name="q9" value="D"> D- Oriente vers une pouss√©e d‚Äôarthrose.</li>
            
                    <li><input type="checkbox" id="q9e" name="q9" value="E"> E- Oriente vers une pouss√©e de chondrocalcinose articulaire.</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q9')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q9')">R√©essayer</button>
                <button class="favorite-button" data-question="9">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_9" onclick="toggleCommentSection('RHU2022_9', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_9">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-10" class="question-container">
            <div class="question">
                <p>10.) Une hyperuric√©mie asymptomatique:</p>
                <ul>
        
                    <li><input type="checkbox" id="q10a" name="q10" value="A"> A- Est d√©finit par une uric√©mie sup√©rieure √† 60 mg/l pour les 2 sexes.</li>
            
                    <li><input type="checkbox" id="q10b" name="q10" value="B"> B- Est d√©finit par une uric√©mie sup√©rieure √† 70 mg/l chez l‚Äôhomme et 60 mg/l chez la femme.</li>
            
                    <li><input type="checkbox" id="q10c" name="q10" value="C"> C- √âvolue vers une goutte dans 50% des cas.</li>
            
                    <li><input type="checkbox" id="q10d" name="q10" value="D"> D- Doit √™tre syst√©matiquement trait√©e.</li>
            
                    <li><input type="checkbox" id="q10e" name="q10" value="E"> E- Peut-√™tre secondaire √† la prise des diur√©tiques</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q10')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q10')">R√©essayer</button>
                <button class="favorite-button" data-question="10">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_10" onclick="toggleCommentSection('RHU2022_10', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_10">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-11" class="question-container">
            <div class="question">
                <p>11.) La colchicine:</p>
                <ul>
        
                    <li><input type="checkbox" id="q11a" name="q11" value="A"> A- Est un traitement de crise de goutte.</li>
            
                    <li><input type="checkbox" id="q11b" name="q11" value="B"> B- C‚Äôest un hypouricemiant.</li>
            
                    <li><input type="checkbox" id="q11c" name="q11" value="C"> C- Se donne √† la dose de 1 mg/jr.</li>
            
                    <li><input type="checkbox" id="q11d" name="q11" value="D"> D- Contre-indiqu√© si clairance de la cr√©atinine est inf√©rieure √† 60mg/min.</li>
            
                    <li><input type="checkbox" id="q11e" name="q11" value="E"> E- Se donne √† la dose de 3 mg/j</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q11')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q11')">R√©essayer</button>
                <button class="favorite-button" data-question="11">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_11" onclick="toggleCommentSection('RHU2022_11', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_11">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-12" class="question-container">
            <div class="question">
                <p>12.) L‚Äôallopurinol:</p>
                <ul>
        
                    <li><input type="checkbox" id="q12a" name="q12" value="A"> A- C‚Äôest un uricolytique</li>
            
                    <li><input type="checkbox" id="q12b" name="q12" value="B"> B- Doit √™tre d√©but√© au cours d‚Äôune crise de goutte</li>
            
                    <li><input type="checkbox" id="q12c" name="q12" value="C"> C- Ne doit pas √™tre arr√©t√© au cours d‚Äôune crise de goutte</li>
            
                    <li><input type="checkbox" id="q12d" name="q12" value="D"> D- C‚Äôest un traitement √† vie</li>
            
                    <li><input type="checkbox" id="q12e" name="q12" value="E"> E- C‚Äôest un traitement de fond de la chondrocalcinose articulaire.</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q12')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q12')">R√©essayer</button>
                <button class="favorite-button" data-question="12">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_12" onclick="toggleCommentSection('RHU2022_12', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_12">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-13" class="question-container">
            <div class="question">
                <p>13.) La chondrocalcinose articulaire:</p>
                <ul>
        
                    <li><input type="checkbox" id="q13a" name="q13" value="A"> A- C‚Äôest une arthropathie m√©tabolique</li>
            
                    <li><input type="checkbox" id="q13b" name="q13" value="B"> B- Se caract√©rise par des d√©p√¥ts de pyrophosphate de sodium</li>
            
                    <li><input type="checkbox" id="q13c" name="q13" value="C"> C- Le liquide articulaire est toujours inflammatoire</li>
            
                    <li><input type="checkbox" id="q13d" name="q13" value="D"> D- Le traitement est symptomatique</li>
            
                    <li><input type="checkbox" id="q13e" name="q13" value="E"> E- Elle peut mimer une polyarthrite rhumato√Øde</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q13')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q13')">R√©essayer</button>
                <button class="favorite-button" data-question="13">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_13" onclick="toggleCommentSection('RHU2022_13', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_13">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-14" class="question-container">
            <div class="question">
                <p>14.) Au cours d‚Äôune pouss√©e de gonarthrose, l‚Äôanalyse du liquide articulaire retrouve :</p>
                <ul>
        
                    <li><input type="checkbox" id="q14a" name="q14" value="A"> A- Liquide visqueux, jaune citrin</li>
            
                    <li><input type="checkbox" id="q14b" name="q14" value="B"> B- Des globules blancs inf√©rieure √† 5000 √©l√©ment/mm √† pr√©dominance de PNN non alt√©r√©es.</li>
            
                    <li><input type="checkbox" id="q14c" name="q14" value="C"> C- Examen bact√©riologique n√©gatif</li>
            
                    <li><input type="checkbox" id="q14d" name="q14" value="D"> D- Absence de microcristaux</li>
            
                    <li><input type="checkbox" id="q14e" name="q14" value="E"> E- Liquide fluide.</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q14')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q14')">R√©essayer</button>
                <button class="favorite-button" data-question="14">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_14" onclick="toggleCommentSection('RHU2022_14', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_14">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-15" class="question-container">
            <div class="question">
                <p>15.) La gonarthrose rapidement destructrice (GRD):</p>
                <ul>
        
                    <li><input type="checkbox" id="q15a" name="q15" value="A"> A- Doit √™tre √©voqu√©e en cas de douleurs mixtes d‚Äôinstallation rapide.</li>
            
                    <li><input type="checkbox" id="q15b" name="q15" value="B"> B- La VS peut √™tre discr√®tement augment√©e.</li>
            
                    <li><input type="checkbox" id="q15c" name="q15" value="C"> C- Sur la radiographie on retrouve pincement rapide > 50% en 6 mois.</li>
            
                    <li><input type="checkbox" id="q15d" name="q15" value="D"> D- Il faut rechercher syst√©matiquement une CCA associ√©e.</li>
            
                    <li><input type="checkbox" id="q15e" name="q15" value="E"> E- Se voit chez 70% des malades</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q15')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q15')">R√©essayer</button>
                <button class="favorite-button" data-question="15">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_15" onclick="toggleCommentSection('RHU2022_15', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_15">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-16" class="question-container">
            <div class="question">
                <p>16.) La calcitriol agit: cocher la (les) r√©ponse (s) exacte (s):</p>
                <ul>
        
                    <li><input type="checkbox" id="q16a" name="q16" value="A"> A- en stimulant l'absorption digestive du calcium</li>
            
                    <li><input type="checkbox" id="q16b" name="q16" value="B"> B- en augmentant la r√©absorption tubulaire r√©nale du calcium</li>
            
                    <li><input type="checkbox" id="q16c" name="q16" value="C"> C- en lib√©rant du calcium des os dans le sang</li>
            
                    <li><input type="checkbox" id="q16d" name="q16" value="D"> D- en favorisant le turn-over osseux et la min√©ralisation osseuse</li>
            
                    <li><input type="checkbox" id="q16e" name="q16" value="E"> E- en diminuant la r√©absorption tubulaire r√©nale du calcium</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q16')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q16')">R√©essayer</button>
                <button class="favorite-button" data-question="16">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_16" onclick="toggleCommentSection('RHU2022_16', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_16">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-17" class="question-container">
            <div class="question">
                <p>17.) L‚Äôassociation de t√©riparatide aux digitaliques peut provoquer des arythmies cardiaques par hyperexcitabilit√©s des cardiocytes ventriculaires (1) car le t√©riparatide peut provoquer une hypercalc√©mie (2):</p>
                <ul>
        
                    <li><input type="checkbox" id="q17a" name="q17" value="A"> A- les 2 propositions sont vraies avec relation de cause √† effet</li>
            
                    <li><input type="checkbox" id="q17b" name="q17" value="B"> B- les 2 propositions sont vraies sans relation de cause √† effet</li>
            
                    <li><input type="checkbox" id="q17c" name="q17" value="C"> C- la proposition n¬∞ 1 est vraie, la proposition n¬∞ 2 est fausse</li>
            
                    <li><input type="checkbox" id="q17d" name="q17" value="D"> D- la proposition n¬∞ 1 est fausse, la proposition n¬∞ 2 est vraie</li>
            
                    <li><input type="checkbox" id="q17e" name="q17" value="E"> E- les 2 propositions sont fausses</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q17')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q17')">R√©essayer</button>
                <button class="favorite-button" data-question="17">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_17" onclick="toggleCommentSection('RHU2022_17', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_17">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-18" class="question-container">
            <div class="question">
                <p>18.) Indiquer parmi les substances suivantes, celle (s) qui joue (nt) un r√¥le fondamental dans l‚Äôabsorption digestive du calcium:</p>
                <ul>
        
                    <li><input type="checkbox" id="q18a" name="q18" value="A"> A- calcitriol</li>
            
                    <li><input type="checkbox" id="q18b" name="q18" value="B"> B- Vit D</li>
            
                    <li><input type="checkbox" id="q18c" name="q18" value="C"> C- parathormone</li>
            
                    <li><input type="checkbox" id="q18d" name="q18" value="D"> D- acide √©tidronique</li>
            
                    <li><input type="checkbox" id="q18e" name="q18" value="E"> E- col√©calcif√©rol</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q18')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q18')">R√©essayer</button>
                <button class="favorite-button" data-question="18">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_18" onclick="toggleCommentSection('RHU2022_18', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_18">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-19" class="question-container">
            <div class="question">
                <p>19.) Indiquer parmi les suivants, la (les) proposition (s) exacte (s). La demi-vie terminale est sup√©rieure √† 10 ans pour:</p>
                <ul>
        
                    <li><input type="checkbox" id="q19a" name="q19" value="A"> A- alendronate</li>
            
                    <li><input type="checkbox" id="q19b" name="q19" value="B"> B- Vit D</li>
            
                    <li><input type="checkbox" id="q19c" name="q19" value="C"> C- calcitonine</li>
            
                    <li><input type="checkbox" id="q19d" name="q19" value="D"> D- col√©calcif√©rol</li>
            
                    <li><input type="checkbox" id="q19e" name="q19" value="E"> E- calcitriol</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q19')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q19')">R√©essayer</button>
                <button class="favorite-button" data-question="19">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_19" onclick="toggleCommentSection('RHU2022_19', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_19">
0
</span> </button>
            </div>
        </div>
        
        <div id="question-20" class="question-container">
            <div class="question">
                <p>20.) Utilis√©s pour leur action antiost√©oporotique donc dans la pr√©vention des fractures de la colonne vert√©brale et de la hanche, (traitement, par exemple, de la maladie de Paget), les biphosphonates peuvent, paradoxalement, provoquer une fracture des maxillaires en cas de chirurgie buccodentaire (1) car au niveau maxillaire il y a un remodelage osseux r√©duit qui explique ce risque (2):</p>
                <ul>
        
                    <li><input type="checkbox" id="q20a" name="q20" value="A"> A- les 2 propositions sont vraies avec relation de cause √† effet</li>
            
                    <li><input type="checkbox" id="q20b" name="q20" value="B"> B- les 2 propositions sont vraies sans relation de cause √† effet</li>
            
                    <li><input type="checkbox" id="q20c" name="q20" value="C"> C- la proposition n¬∞ 1 est vraie, la proposition n¬∞ 2 est fausse</li>
            
                    <li><input type="checkbox" id="q20d" name="q20" value="D"> D- la proposition n¬∞ 1 est fausse, la proposition n¬∞ 2 est vraie</li>
            
                    <li><input type="checkbox" id="q20e" name="q20" value="E"> E- les 2 propositions sont fausses</li>
            
                </ul>
            </div>
            <div class="action-buttons">
                <button type="button" class="correct-button" onclick="correctQuestion('q20')">Corriger</button>
                <button type="button" class="reset-button" onclick="resetQuestion('q20')">R√©essayer</button>
                <button class="favorite-button" data-question="20">&#10084;</button>
                <button class="comment-button" data-question-id="RHU2022_20" onclick="toggleCommentSection('RHU2022_20', event)"> üí¨ <span class="badge" data-comment-id="RHU2022_20">
0
</span> </button>
            </div>
        </div>
        
<div class="button-container">
               <button class="submit-quiz-button" onclick="submitQuiz()" type="button"> Soumettre tout le Quiz </button>
               <button class="favorite-button" id="voir-favoris-btn" onclick="voirFavoris()"> Voir Favoris </button>
               <!-- Nouveau bouton -->
            </div>
            <div class="blur-background" id="blur-background"> </div>
            <div class="result-popup" id="result-popup">
               <h3>
R√©sultat du Quiz
</h3>
               <div id="result"> </div>
               <button class="close-button" id="close-result" onclick="closeResult(event)"> Fermer </button>
               <button class="detail-button" id="voir-detail-btn" onclick="afficherDetails(event)" style="display: none;"> Voir D√©tail </button>
               <button class="reset-quiz-button" onclick="resetAll()" type="button"> R√©essayer tout le Quiz </button>
            </div>
            <div class="details-section" id="details-section" style="display: none;">
               <h3>
Tableau des questions
</h3>
               <div class="question-links" id="question-links"> </div>
            </div>
            <div id="timer-container"> <span id="timer">
60:00
</span> </div>
            <div id="details-section" style="display:none;">
               <h2>
Questions :
</h2>
               <div class="question-links" id="question-links"> </div>
            </div>
<div class="comments-section" id="comments-section">
    <h3>Commentaires</h3>
    <textarea id="new-comment" placeholder="√âcrire un commentaire..."></textarea>
    <button type="button" onclick="addComment(event)">Ajouter</button>
    <div id="comment-alert" class="alert" style="display: none;"></div>
    <div id="comments-list"></div>
</div>

<!-- Boutons flottants -->
<div id="floating-buttons" class="floating-buttons" style="position: fixed; bottom: 50px; right: 50px; z-index: 1000;">
    <!-- Bouton pour afficher le cours -->
    <button id="show-course-btn" class="floating-btn" type="button" 
            onclick="window.open('https://drive.google.com/drive/folders/1Xd_FaJbPk4FJv3G5-96L7G0UlQnUZuSf', '_blank');">üìö</button>
    <!-- Bouton pour afficher le contact -->
<button id="open-contact-modal" class="floating-btn" type="button">
    ‚úâÔ∏è
</button>

</div>





<div class="message-container" id="message-container" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:#f9f9f9; padding:40px; box-shadow:0 4px 12px rgba(0,0,0,0.15); border-radius:12px; z-index:1001; width:600px; max-width:90%; font-family:Arial, sans-serif;">
    <div style="text-align:center; margin-bottom:30px;">
        <h2 style="margin:0; font-size:24px; font-weight:bold; color:#333;">Posez vos observations <span>üìù</span></h2>
        <p style="margin:10px 0 0; font-size:16px; color:#666;">Nous sommes √† votre √©coute</p>
    </div>
    <div class="mb-3" style="margin-bottom:30px;">
        <p style="font-size:16px; color:#333; margin:0;">En tant Que :</p>
        <div style="margin-top:10px;">
            <input type="radio" id="username" name="mode" value="username" style="margin-right:8px;">
            <label for="username" style="font-size:16px; color:#333; cursor:pointer;">{{ user_full_name}}</label>
            <br>
            <input type="radio" id="anonymous" name="mode" value="anonymous" checked style="margin-right:8px; margin-top:10px;">
            <label for="anonymous" style="font-size:16px; color:#333; cursor:pointer;">Anonyme</label>
        </div>
    </div>
    <div class="mb-3">
        <label for="message" class="form-label" style="font-size:18px; font-weight:bold; color:#333; margin-bottom:10px; display:block;">Votre message :</label>
        <textarea class="form-control" id="message" rows="6" placeholder="Precisez l'examen si c'est en rapport avec une question..." style="width:100%; font-size:16px; padding:15px; border:1px solid #ccc; border-radius:8px; box-shadow:inset 0 1px 3px rgba(0,0,0,0.1); background:#fff;"></textarea>
    </div>
<span class="close-btn" id="close-btn" style="cursor:pointer; position:absolute; top:15px; right:15px; font-size:51px; color:#ff0000; font-weight:bold;">&times;</span>
<!-- Bouton Envoyer styl√© -->
<div style="text-align:center; margin-top:30px;">
    <button type="button" class="btn btn-primary" id="send-message" style="background-color:#007bff; color:white; border:none; padding:12px 30px; border-radius:8px; font-size:18px; font-weight:bold; cursor:pointer; box-shadow:0 4px 8px rgba(0, 0, 0, 0.2); transition:all 0.3s ease;">
        Envoyer
    </button>
</div>
</div>




<div id="blur-overlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;"></div>



<script src="{% static 'java/contact.js' %}"></script>
    
            <script>
                // R√©ponses correctes pour les questions
                const correctAnswers = {
    q1: ['B'],
    q2: ['B', 'E'],
    q3: ['E'],
    q4: ['D', 'E'],
    q5: ['A'],
    q6: ['A', 'C', 'D'],
    q7: ['A', 'E'],
    q8: ['A', 'B', 'C', 'D'],
    q9: ['A', 'B'],
    q10: ['B', 'E'],
    q11: ['A', 'C'],
    q12: ['C', 'D'],
    q13: ['A', 'D', 'E'],
    q14: ['A', 'C', 'D'],
    q15: ['A', 'B', 'C'],
    q16: ['A', 'B', 'C', 'D'],
    q17: ['A'],
    q18: ['A', 'B', 'E'],
    q19: ['A'],
    q20: ['C'],
};


                // Contenu du fichier JavaScript
                 // Variable globale pour stocker l'intervalle du timer
            let timerInterval;
            const userAnswers = {}; // Object pour stocker les r√©ponses de l'utilisateur
            // Fonction pour d√©marrer le timer
            function startTimer(duration, display) {
               let timer = duration,
                  minutes, seconds;
               timerInterval = setInterval(() => {
                  minutes = parseInt(timer / 60, 10);
                  seconds = parseInt(timer % 60, 10);
                  minutes = minutes < 10 ? "0" + minutes : minutes;
                  seconds = seconds < 10 ? "0" + seconds : seconds;
                  display.textContent = minutes + ":" + seconds;
                  // V√©rifie si le temps est √©coul√©
                  if (--timer < 0) {
                     clearInterval(timerInterval);
                     showEndMessage();
                  }
               }, 1000);
            }
            // Fonction pour afficher le message de fin de test
            function showEndMessage() {
               const blurBackground = document.createElement('div');
               blurBackground.id = 'test-end-blur';
               blurBackground.style.position = 'fixed';
               blurBackground.style.top = '0';
               blurBackground.style.left = '0';
               blurBackground.style.width = '100%';
               blurBackground.style.height = '100%';
               blurBackground.style.background = 'rgba(0, 0, 0, 0.5)';
               blurBackground.style.zIndex = '100';
               blurBackground.style.display = 'flex';
               blurBackground.style.alignItems = 'center';
               blurBackground.style.justifyContent = 'center';
               const endMessage = document.createElement('div');
               endMessage.id = 'test-end-message';
               endMessage.style.padding = '40px';
               endMessage.style.background = '#ffffff';
               endMessage.style.borderRadius = '8px';
               endMessage.style.textAlign = 'center';
               endMessage.style.boxShadow = '0 4px 8px rgba(0, 0, 0, 0.2)';
               endMessage.innerHTML = '<h2>Test termin√©</h2><p>Le temps imparti est √©coul√©.</p><button onclick="location.reload()">Recommencer</button>';
               blurBackground.appendChild(endMessage);
               document.body.appendChild(blurBackground);
               // Optionnel : masquer le conteneur de timer
               const timerContainer = document.getElementById('timer-container');
               timerContainer.classList.add('hide');
            }
 // Fonction pour r√©initialiser une seule question
            function resetQuestion(questionName) {
               const form = document.getElementById('quiz-form');
               const questionDiv = document.querySelector(`input[name="${questionName}"]`).closest('.question-container');
               // D√©cocher toutes les cases de cette question
               const inputs = Array.from(form.elements[questionName]);
               inputs.forEach(input => {
                  input.checked = false;
               });
               // Supprimer les styles correct/incorrect et remettre les couleurs par d√©faut
               questionDiv.classList.remove('correct', 'incorrect');
               questionDiv.querySelectorAll('li').forEach(li => {
                  li.style.color = ''; // R√©initialiser la couleur
                  li.style.fontWeight = ''; // R√©initialiser le texte en gras
                  li.style.textShadow = ''; // R√©initialiser l'ombre du texte
                  li.style.backgroundColor = ''; // R√©initialiser le fond
                  li.style.border = ''; // R√©initialiser la bordure
               });
               // Supprimer les informations enregistr√©es sur la r√©ponse de cette question
               delete userAnswers[questionName];
            }
            // Fonction pour soumettre le quiz et afficher le r√©sultat
            
// Fonction pour soumettre le quiz et afficher le r√©sultat
async function submitQuiz() {
    console.log("D√©but de la soumission du quiz.");

    const form = document.getElementById('quiz-form');
    if (!form) {
        console.error("Erreur : Formulaire introuvable.");
        alert("Formulaire introuvable. Veuillez r√©essayer.");
        return;
    }

    let score = 0;

    // √âvaluer les r√©ponses utilisateur
    for (const question of Object.keys(correctAnswers)) {
        correctQuestion(question); // Fonction pour corriger chaque question
        const userAnswer = userAnswers[question]?.isCorrect;
        if (userAnswer) {
            score++;
        }
    }

    console.log("Score brut calcul√© (frontend) :", score);
    console.log("R√©ponses utilisateur envoy√©es :", userAnswers);

    // Lancer les confettis et afficher le message de f√©licitations si le score est parfait (50 sur 50)
    lancerConfettisEtMessage(score);

    // Mise √† jour du r√©sultat dans la bo√Æte de dialogue
    const resultDiv = document.getElementById('result'); // Assure-toi que tu as un div avec l'id 'result' dans ton HTML

if (score === 0) { resultDiv.innerHTML = `<p>Vous avez aucune r√©ponse juste, bozo !</p>`; } else if  (score === 50) { 20) {
        // Liste des messages de f√©licitations
        const messages = [
"F√©licitations ! Votre ma√Ætrise des techniques d'imagerie m√©dicale est remarquable !",
"Bravo ! Vous excellez dans l'interpr√©tation des images radiologiques.",
"Incroyable ! Votre compr√©hension des principes de la radiologie est impressionnante.",
"Parfait ! Vous √™tes sur le chemin pour devenir un(e) expert(e) en diagnostic par imagerie.",
"Votre pr√©cision dans l'analyse des radiographies est admirable.",
"Impressionnant ! Vous appliquez les concepts d'imagerie m√©dicale avec rigueur.",
"Bravo ! Votre aptitude √† identifier les anomalies radiologiques est exceptionnelle.",
"Extraordinaire ! Vous utilisez les outils d'imagerie avec une grande ma√Ætrise.",
"F√©licitations ! Vous √™tes pr√™t(e) √† contribuer √† des diagnostics pr√©cis et rapides.",
"Votre capacit√© √† relier les images radiologiques aux conditions cliniques est impressionnante.",
"Impressionnant ! Vous d√©montrez une compr√©hension approfondie des techniques avanc√©es de radiologie.",
"Bravo ! Votre passion pour l'imagerie m√©dicale est √©vidente.",
"Votre expertise en interpr√©tation d'IRM et de scanner est un v√©ritable atout.",
"Parfait ! Vous d√©montrez une aptitude exceptionnelle pour la radiologie interventionnelle.",
"F√©licitations ! Vous √™tes sur le chemin pour devenir un(e) pionnier(√®re) en imagerie m√©dicale.",
"Votre pr√©cision dans l'utilisation des technologies de pointe est exemplaire.",
"Bravo ! Vous appliquez les connaissances radiologiques avec rigueur et pr√©cision.",
"Incroyable ! Vous interpr√©tez les images complexes avec une facilit√© admirable.",
"F√©licitations ! Votre curiosit√© pour les technologies d'imagerie est une source d'inspiration.",
"Votre capacit√© √† interpr√©ter les r√©sultats radiologiques est impressionnante.",

        ];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        resultDiv.innerHTML = `<p>${randomMessage}</p>`;
    } else {
        resultDiv.innerHTML = `Vous avez obtenu ${score} bonnes r√©ponses sur ${Object.keys(correctAnswers).length}.`;
    }

    // Afficher la bo√Æte de r√©sultat avec animation
    const resultPopup = document.getElementById('result-popup');
    const blurBackground = document.getElementById('blur-background');

    blurBackground.style.display = 'block';
    resultPopup.style.display = 'block';

    setTimeout(() => {
        blurBackground.classList.add('show'); // Ajoute l'animation de fondu sur le fond flout√©
        resultPopup.classList.add('show'); // Ajoute l'animation de zoom sur la bo√Æte de r√©sultat
    }, 100); // L√©g√®re pause pour plus de fluidit√©

    document.getElementById('voir-detail-btn').style.display = 'inline-block';

    // Envoi des donn√©es au backend
    try {
        console.log("Pr√©paration de l'enregistrement au backend...");

        const response = await fetch("/soumettre-quiz/", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "X-CSRFToken": "{{ csrf_token }}" // Inclure le token CSRF
            },
            body: JSON.stringify({
                exam_name: "RHU2022", // Remplacez par le nom r√©el de l'examen
                score: score,
                userAnswers: userAnswers
            })
        });

        const result = await response.json();
        if (response.ok) {
            console.log("Score enregistr√© avec succ√®s :", result);
        } else {
            console.error("Erreur du serveur :", result.message);
            alert(`Erreur : ${result.message}`);
        }
    } catch (error) {
        console.error("Erreur lors de l'envoi des donn√©es :", error);
        alert("Une erreur s'est produite lors de la soumission. Veuillez r√©essayer.");
    }
}

            function resetAll() {
               const form = document.getElementById('quiz-form');
               // R√©initialiser toutes les questions
               for (const question of Object.keys(correctAnswers)) {
                  const questionDiv = document.querySelector(`input[name="${question}"]`).closest('.question-container');
                  form.elements[question].forEach(input => {
                     input.checked = false; // D√©cocher toutes les cases
                  });
                  // Supprimer les styles correct/incorrect sans toucher au style des bonnes r√©ponses
                  questionDiv.classList.remove('correct', 'incorrect');
                  questionDiv.querySelectorAll('li').forEach(li => {
                     li.style.color = ''; // R√©initialiser la couleur du texte
                     li.style.fontWeight = ''; // Supprimer les styles ajout√©s
                     li.style.textShadow = ''; // R√©initialiser l'ombre du texte
                     li.style.backgroundColor = ''; // Remettre le fond par d√©faut
                     li.style.border = ''; // R√©initialiser la bordure
                  });
               }
               // R√©initialiser l'affichage du timer
               const timerDuration = 60 * 60; // Remettre √† 60 minutes (ou 10 secondes pour le test)
               const display = document.querySelector('#timer');
               startTimer(timerDuration, display); // Red√©marrer le timer
               // Masquer la bo√Æte de r√©sultat
               const resultPopup = document.getElementById('result-popup');
               const blurBackground = document.getElementById('blur-background');
               resultPopup.classList.remove('show');
               blurBackground.classList.remove('show');
               setTimeout(() => {
                  resultPopup.style.display = 'none';
                  blurBackground.style.display = 'none';
               }, 500);
               // Remonter en haut de la page
               window.scrollTo({
                  top: 0,
                  behavior: 'smooth'
               });
               document.getElementById('voir-detail-btn').style.display = 'none'; // Masquer le bouton "Voir D√©tail"
            }
            // Fonction pour fermer la popup et garder les couleurs des bonnes/mauvaises r√©ponses
            function closeResult(event) {
               event.preventDefault(); // Emp√™che le comportement par d√©faut du bouton
               const resultPopup = document.getElementById('result-popup');
               const blurBackground = document.getElementById('blur-background');
               // Masquer la bo√Æte de r√©sultat
               resultPopup.classList.remove('show');
               blurBackground.classList.remove('show');
               setTimeout(() => {
                  resultPopup.style.display = 'none';
                  blurBackground.style.display = 'none';
               }, 500);
               // D√©cocher toutes les cases sans changer la couleur des bonnes/mauvaises r√©ponses
               const form = document.getElementById('quiz-form');
               for (const question of Object.keys(correctAnswers)) {
                  form.elements[question].forEach(input => {
                     input.checked = false; // D√©cocher toutes les cases
                  });
               }
            }
            // Fonction pour afficher les d√©tails et rediriger vers SyntRHU2022
            function afficherDetails(event) {
               event.preventDefault(); // Emp√™che le comportement par d√©faut du bouton
               saveUserAnswers(); // Enregistrer les r√©ponses avant de quitter la page
               window.location.href = '{% url 'dynamic_view' 'S5' 'Radiologie' 'syntRHU2022' %}'; // Redirection vers SyntRHU2022
            }
            // Fonction pour d√©filer jusqu'√† la question
            function scrollToQuestion(questionNumber) {
               const questionDiv = document.querySelector(`.question-container:nth-of-type(${questionNumber})`);
               if (questionDiv) {
                  questionDiv.scrollIntoView({
                     behavior: 'smooth'
                  });
               }
            }

            function saveUserAnswers() {
               // Change la cl√© pour la version 2019
               localStorage.setItem('userAnswersRHU2022', JSON.stringify(userAnswers));
            }
            // Fonction pour afficher les confettis et ajouter le message de f√©licitations dans la popup de r√©sultats
            function lancerConfettisEtMessage(score) {
    if (score === 20) {
                  // Lancer les confettis
                  confetti({
                     particleCount: 200,
                     spread: 70,
                     origin: {
                        y: 0.6
                     },
                     colors: ['#bb0000', '#ffffff'], // Couleurs de confettis
                  });
                  // Ajouter un message de f√©licitations √† la bo√Æte de r√©sultat
                  const resultDiv = document.getElementById('result');
                  const felicitationMessage = `<p>F√©licitations! Vous avez obtenu ${score} bonnes r√©ponses. Vous serez un grand m√©decin !</p>`;
                  // Ajouter le message √† la fin du r√©sultat
                  resultDiv.innerHTML += felicitationMessage;
               }
            }
            // Partie favori pour Anatomie2020
            // Tableau pour stocker les questions favorites, r√©cup√©r√© depuis le localStorage (Anatomie2019)
            let favoriteQuestionsRHU2022 = JSON.parse(localStorage.getItem('favoriteQuestionsRHU2022')) || [];
            console.log('Favorite questions loaded from localStorage:', favoriteQuestionsRHU2022);

            function toggleFavorite(event, questionNumber) {
               event.preventDefault(); // Emp√™che le rafra√Æchissement de la page
               const button = document.querySelector(`.favorite-button[data-question="${questionNumber}"]`);
               const questionContent = document.querySelector(`#question-${questionNumber}`).innerHTML; // R√©cup√®re le contenu HTML de la question
               // V√©rifie si la question est d√©j√† dans les favoris
               const isFavorited = favoriteQuestionsRHU2022.includes(questionNumber);
               if (isFavorited) {
                  // Si elle est d√©j√† favoris√©e, on la retire des favoris
                  favoriteQuestionsRHU2022 = favoriteQuestionsRHU2022.filter(q => q !== questionNumber);
                  button.classList.remove('favorited'); // Retire la classe favori
                  localStorage.removeItem(`favoriteContent2019-${questionNumber}`); // Supprime le contenu de la question
               } else {
                  // Si elle n'est pas favoris√©e, on l'ajoute
                  favoriteQuestionsRHU2022.push(questionNumber);
                  button.classList.add('favorited'); // Ajoute la classe favori
                  localStorage.setItem(`favoriteContent2019-${questionNumber}`, questionContent); // Stocke le contenu de la question dans le localStorage
               }
               // Sauvegarde uniquement les favoris
               saveFavoriteState2019(); // <== Remplacez par saveFavoriteState2019
               // Mise √† jour du bouton "Voir Favori" sans rafra√Æchir la page
               showFavoriteButton();
            }

            function saveFavoriteState2019() {
               localStorage.setItem('favoriteQuestionsRHU2022', JSON.stringify(favoriteQuestionsRHU2022)); // Sauvegarde les questions favorites
            }

            function initializeFavoriteButtons() {
               const allFavoriteButtons = document.querySelectorAll('.favorite-button');
               allFavoriteButtons.forEach(button => {
                  const questionNumber = parseInt(button.getAttribute('data-question'), 10);
                  // V√©rifie si cette question est dans les favoris et applique la classe
                  if (favoriteQuestionsRHU2022.includes(questionNumber)) {
                     button.classList.add('favorited'); // Ajoute l'√©tat favori
                  } else {
                     button.classList.remove('favorited'); // Retire l'√©tat favori
                  }
                  // Ajoute un √©v√©nement de clic pour chaque bouton et emp√™che le rafra√Æchissement
                  button.addEventListener('click', (event) => toggleFavorite(event, questionNumber));
               });
            }

            function showFavoriteButton() {
               const voirFavorisBtn = document.getElementById('voir-favoris-btn');
               if (favoriteQuestionsRHU2022.length > 0) {
                  voirFavorisBtn.style.display = 'inline-block'; // Affiche le bouton si des questions sont favoris√©es
               } else {
                  voirFavorisBtn.style.display = 'none'; // Cache le bouton si aucun favori
               }
            }
            // Appelle cette fonction apr√®s avoir ajout√© ou retir√© des favoris
            window.onload = function() {
               console.log('Page loaded, initializing favorite buttons for 2019.');
               initializeFavoriteButtons(); // Charger les boutons de favoris
               showFavoriteButton(); // Afficher le bouton "Voir Favori" si des favoris existent
               const timerDuration = 60 * 60; // 60 minutes
               const display = document.querySelector('#timer');
               startTimer(timerDuration, display);
               // R√©cup√®re toutes les listes (li) qui contiennent des propositions
               const propositions = document.querySelectorAll('li');
               propositions.forEach(function(proposition) {
                  // Trouve la checkbox dans chaque liste
                  const checkbox = proposition.querySelector('input[type="checkbox"]');
                  if (checkbox) {
                     // Cr√©er un label
                     const label = document.createElement('label');
                     // Donner un id √† la checkbox si elle n'en a pas
                     if (!checkbox.id) {
                        checkbox.id = checkbox.name + '-' + checkbox.value; // Ex: q1-A
                     }
                     // D√©placer le texte de la proposition dans le label
                     label.htmlFor = checkbox.id; // Le 'for' du label correspond √† l'id de la checkbox
                     label.appendChild(checkbox); // D√©placer la checkbox dans le label
                     label.appendChild(document.createTextNode(proposition.textContent.trim())); // Ajouter le texte de la proposition
                     // Remplacer le contenu original par le nouveau label
                     proposition.innerHTML = ''; // Vider le contenu de l'√©l√©ment <li>
                     proposition.appendChild(label); // Ajouter le label modifi√©
                  }
               });
            };
            try {
               localStorage.setItem('testKey', 'testValue');
               const testValue = localStorage.getItem('testKey');
               if (testValue !== 'testValue') {
                  console.error('localStorage is not functioning as expected.');
               }
            } catch (error) {
               console.error('localStorage error:', error);
            }

            function voirFavoris() {
    // D√©finir dynamiquement le favori correspondant
    const currentFavorite = 'favori9'; // Vous pouvez ajuster cette logique en fonction de la page actuelle
    
    // Rediriger vers la page du favori correspondant
    console.log('Redirection vers le favori :', currentFavorite); // Pour debug
    window.location.href = `/favoris/${currentFavorite}/`;
}



            </script>
            <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js">


            </script>
         </form>
      </div>
      
   </body>

</html>      <script>
// Fonction pour corriger une question
function correctQuestion(questionName) {
    const form = document.getElementById('quiz-form');
    const questionDiv = document.querySelector(`input[name="${questionName}"]`).closest('.question-container');
    const selected = Array.from(form.elements[questionName]).filter(input => input.checked).map(input => input.value);

    // Calculer si la r√©ponse est correcte
    const isCorrect = JSON.stringify(correctAnswers[questionName].sort()) === JSON.stringify(selected.sort());

    // Enregistre si la r√©ponse est correcte ou incorrecte
    userAnswers[questionName] = {
        selected: selected,
        isCorrect: isCorrect
    };

    // Supprimer les styles pr√©c√©dents
    questionDiv.classList.remove('correct', 'incorrect');
    questionDiv.querySelectorAll('li').forEach(li => li.style.color = '');

    // Applique les couleurs selon la validit√© des r√©ponses
    questionDiv.querySelectorAll('li').forEach(li => {
        const isChoiceCorrect = correctAnswers[questionName].includes(li.querySelector('input').value);
        const isSelected = selected.includes(li.querySelector('input').value);

        if (isChoiceCorrect) {
            // Appliquer le style vert aux bonnes r√©ponses
            li.style.color = 'green';
            li.style.fontWeight = 'bold';
            li.style.textShadow = '1px 1px 2px rgba(0, 128, 0, 0.7)';
        }

        if (isSelected && !isChoiceCorrect) {
            // Appliquer le style rouge pour les mauvaises r√©ponses s√©lectionn√©es
            li.style.color = 'red';
        }
    });

    console.log(`D√©but de la correction pour la question ${questionName}`);
    console.log(`R√©ponses s√©lectionn√©es pour ${questionName}: ${selected.join(', ')}`);
    console.log(`R√©sultat pour ${questionName}: ${isCorrect ? 'Correct' : 'Incorrect'}`);

    // D√©terminer le nom de l'examen et l'ID complet de la question
    const examNameElement = document.getElementById('exam_name');
    const examName = examNameElement.value; // Nom de l'examen (par exemple, Anatomie2023)
    const fullChoiceIds = selected.map(choice => `${examName}_${questionName.substring(1)}_${choice.toLowerCase()}`);
    console.log(`IDs complets g√©n√©r√©s pour les choix : ${fullChoiceIds.join(', ')}`);

    // Envoyer les donn√©es au serveur
    fetch('/track_attempts/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        },
        body: JSON.stringify({
            question_name: questionName,
            full_choice_ids: fullChoiceIds
        })
    })
        .then(response => response.json())
        .then(data => {
            console.log(`Donn√©es re√ßues du serveur : ${JSON.stringify(data)}`);
            handleAlert(data.alert, questionDiv);
            updateStatisticalAlerts(data, questionDiv);
        })
        .catch(error => console.error('Erreur lors de l‚Äôenvoi des donn√©es:', error));
}

// Fonction pour g√©rer les alertes
function handleAlert(alertData, questionDiv) {
    const existingAlert = questionDiv.querySelector('.alert-indicator');
    if (existingAlert) {
        existingAlert.remove();
    }

    if (alertData) {
        const alertIndicator = document.createElement('div');
        alertIndicator.className = 'alert-indicator';
        alertIndicator.style.backgroundColor = alertData.color || '#f8d7da';
        alertIndicator.style.padding = '10px';
        alertIndicator.style.marginTop = '10px';
        alertIndicator.style.borderRadius = '5px';
        alertIndicator.style.fontWeight = 'bold';
        alertIndicator.style.color = '#721c24';
        alertIndicator.style.boxShadow = '0 2px 5px rgba(0, 0, 0, 0.1)';
        alertIndicator.textContent = alertData.message;

        questionDiv.appendChild(alertIndicator);
        saveAlertToLocalStorage(questionDiv.getAttribute('data-question-id'), alertData);
    } else {
        removeAlertFromLocalStorage(questionDiv.getAttribute('data-question-id'));
    }
}

// Charger les alertes persistantes
function loadAlertsFromLocalStorage() {
    const storedAlerts = JSON.parse(localStorage.getItem('alerts')) || {};
    Object.keys(storedAlerts).forEach(questionId => {
        const questionDiv = document.querySelector(`.question-container[data-question-id="${questionId}"]`);
        if (questionDiv) {
            handleAlert(storedAlerts[questionId], questionDiv);
        }
    });
}

// Sauvegarder les alertes dans localStorage
function saveAlertToLocalStorage(questionId, alertData) {
    const storedAlerts = JSON.parse(localStorage.getItem('alerts')) || {};
    storedAlerts[questionId] = alertData;
    localStorage.setItem('alerts', JSON.stringify(storedAlerts));
}

// Supprimer une alerte de localStorage
function removeAlertFromLocalStorage(questionId) {
    const storedAlerts = JSON.parse(localStorage.getItem('alerts')) || {};
    delete storedAlerts[questionId];
    localStorage.setItem('alerts', JSON.stringify(storedAlerts));
}

// Mise √† jour des alertes statistiques
function updateStatisticalAlerts(data, questionDiv) {
    const existingStatisticalAlerts = questionDiv.querySelectorAll('.statistical-alert');
    existingStatisticalAlerts.forEach(alert => alert.remove());

    if (data.failure_rate > 0.6) {
        const failureRateAlert = document.createElement('div');
        failureRateAlert.className = 'statistical-alert';
        failureRateAlert.style.backgroundColor = '#add8e6';
        failureRateAlert.style.padding = '10px';
        failureRateAlert.style.marginTop = '10px';
        failureRateAlert.style.borderRadius = '5px';
        failureRateAlert.style.fontWeight = 'bold';
        failureRateAlert.style.color = '#004085';
        failureRateAlert.style.boxShadow = '0 2px 5px rgba(0, 0, 0, 0.1)';
        failureRateAlert.textContent = `üîµ Votre taux d'√©chec est de ${(data.failure_rate * 100).toFixed(0)}%. Revoir cette question est conseill√©.`;

        questionDiv.appendChild(failureRateAlert);
    }
}

// Charger les alertes au d√©marrage
document.addEventListener('DOMContentLoaded', () => {
    loadAlertsFromLocalStorage();
});

</script>
<script src="{% static 'java/sidebar.js' %}"></script>
<script src="{% static 'java/navbar.js' %}"></script>
    <script src="{% static 'java/comment.js' %}"></script>
        </body>
    </html>
    